@inherits ContactEditBase
@page "/contactedit"
@page "/contactedit/{contactId}"

@using JobHunter.Shared
@using JobHunter.Application
@using BlueSite.Data
@using BlueSite.Data.Entities

@inject IJSRuntime JsRuntime
@inject BlueSiteContext _context
<SideBar MenuSet="Create New Action" />

<EditForm Model="@Contact" OnValidSubmit="HandleValidSubmit" OnInvalidSubmit="HandleInvalidSubmit">
    <div class="d-inline-block" style="width:70%">
        <h1>Edit Contact <span class="normal">(Id: #@Contact.ContactId)</span></h1>
    </div>
    <div class="d-inline-block" style="width:28%; text-align: right;">
        <button class="btn btn-primary" style="margin-top: 25px;">Save</button>
    </div>
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="container left">
        <div class="row">
            <div class="form-group col-sm-3">
                <label class="form-label" for="action-title">First Name</label>
                <input type="text" @bind-value="Contact.FirstName" id="first-name" class="form-control bs-input-full bs-title inset" />
            </div>
            <div class="form-group col-sm-3">
                <label class="form-label" for="action-title">Last Name</label>
                <input type="text" @bind-value="Contact.LastName" id="last-name" class="form-control bs-input-full bs-title inset" />
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-8">
                <label class="form-label" for="action-title">Title</label>
                <input type="text" @bind-value="Contact.Title" id="first-name" class="form-control bs-input-full inset" />
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label class="form-label">Phone Numbers</label><br />
                @if (Contact.Phones != null)
                {
                    @for (int a = 0; a < Contact.Phones.Count; a++)
                    {
                        <PhoneNumber Id="phone-type" Index="a" Phone="Contact.Phones[a]" PhoneTypes="PhoneTypes" HandleEventClick="@HandlePhoneTypeClick" Width="225px" />
                    }
                }
                <PhoneNumber Id="phone-type-new" Phone="NewPhone" PhoneTypes="PhoneTypes" HandleEventClick="@HandlePhoneTypeClick" Width="225px" />
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label class="form-label" for="action-title">Email Address</label>
                <input type="text" @bind-value="Contact.Email" id="email" class="form-control bs-input-full inset" />
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <label class="form-label" for="action-title">Website</label>
                <input type="text" @bind-value="Contact.Website" id="website" class="form-control bs-input-full inset" />
            </div>
        </div>
    </div>
</EditForm>
<SelectListing Id="1" @ref="phoneTypeList" Data="@PhoneTypes" OnChangeCallback="@HandleSetPhoneType" Class="select select-large" Width="120px" />
<div class="info">@StatusMessage</div>
