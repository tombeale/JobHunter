@inherits ToDoBase
@page "/actions"
@using JobHunter.Shared
@using JobHunter.Application
@using BlueSite.Data
@using BlueSite.Data.Entities
@using BlueSite.Components
@using BlueSite.Data.Interfaces
@using JobHunter.Models
@using System.Diagnostics


<SideBar MenuSet="todolist" OnClickCallback="@HandleSidebarOption" />

<div class="d-inline-block" style="width:70%">
    <h1>Action Items <span class="normal">(@todos.Count(todo => !todo.IsDone) Active Items)</span></h1>
</div>
<div class="d-inline-block" style="width:28%; text-align: right;">
    <DropDown OnClickCallback="@HandleSetActionType" Data="@Options" Value="@ActionType" Style="width:120px;" />
</div>
<table class="to-do" border="0" style="width: 100%">

    @for (int i = 0; i < todos.Count; i++)
    {
        int index = i;
        ActionItem todo = todos[index];
        if (!todo.IsDone || !hideDone)
        {
            <ToDoRow Index="@index" Action="@todos[index]" OnChangeCallback="@HandleActionChange" OnRowOptionCallback="@HandleRowOptionClick" />
        }
    }
    <tr class="to-do">
        <td width="40">&nbsp;</td>
        <td width="100%">
            <input type="text" class="form-control to-do"
                   @onkeypress="@(e => handleNewTodoKeypress(e))" placeholder="---" @bind="newTodo" @bind:event="oninput" />
        </td>
    </tr>
</table>
<Confirm @ref="confirm" Title="Confirm Delete Done Items" Message="Yes, if you select continue, all the items marked as done will be removed (You can't get them back)"
         OnClickCallback="@HandleDialogSelection" />

<NoteEdit @ref="noteEdit" Title="Edit Note" Message="Note editing stuff goes here"
         OnClickCallback="@HandleNoteSave" />

